# GSI_Compression
Проект содержит программу с эффективным алгоритмом сжатия ГСИ

1. Выбор эталонов. 
Выбирается два параметра ошибок. Первый для сравнения с базовыми эталонами, второй для сравнения с внутренними эталонами. Первый параметр больше второго.
Выбирается обьект для сравнения. Сравнивается со всеми имеющимися базовыми эталонами. Если элемент не имеет не с одним базовым эталоном ошибку меньше первого параметра, то эталон добавляется в группу базовых и соответствующую ему группу внутренних эталонов.
Если существуют базовые эталоны, ошибка с которыми меньше первого параметра, то элемент сравнивается с его внутренними эталонами.
Если не с ондним внутренним эталоном ошибка не меньше второго параметра, то элемент добавляется в группу внутренних параметров. Иначе выбирается эталон с наименьшей ошибкой и возвращается его номер с параметром для КЭКМ. 

Алгоритм с двумерным эталонным массивом и проверкой MSE
Идея:
Структура hsi_t — это двумерный массив int16_t[i][j][bands], где:

i — индекс основного эталонного пикселя (центра кластера).

j — индекс дополнительных пикселей, близких к i (если mse > threshold_side).

Проверка MSE:

Сначала сравниваем пиксель со всеми основными эталонами (hsi_t[i][0]).

Если минимальная ошибка > threshold, добавляем как новый основной эталон (hsi_t[n+1][0]).

Иначе проверяем с дополнительными пикселями (hsi_t[i][j]).

Если ошибка > threshold_side, добавляем в текущий кластер (hsi_t[i][j+1]).

Иначе возвращаем информацию о ближайшем пикселе (i, j, mse).

Элатоны лучше представлять квадратной матрицой с номерами элементов. Где первый столбец - номера базовых эталонов. В строке хранятся номера внутренних эталонов.

2. После сжатия, для описания дискретных объектов необходимо сформировать в выходном массиве два поля: поле Etalons – для задания описаний эталонов и поле DiscreteObj – для параметрического описания объектов, представляющего совокупность записей постоянной длины. Каждая запись включает в себя данные: список эталонов и записи одинаковой длины, сожержащие номер эталона, коэффициент сжатия и координаты пикселя.